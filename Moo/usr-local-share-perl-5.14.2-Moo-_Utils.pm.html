<div>
<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;float:left;background-color:#eee;border-right:1px #999988 solid">
<div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">1</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">2</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">3</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">4</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">5</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">6</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">7</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">8</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">9</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">10</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">11</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">12</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">13</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">14</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">15</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">16</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">17</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">18</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">19</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">20</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">21</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">22</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">23</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">24</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">25</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">26</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">27</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">28</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">29</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">30</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">31</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">32</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">33</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">34</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">35</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">36</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">37</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">38</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">39</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">40</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">41</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">42</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">43</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">44</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">45</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">46</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">47</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">48</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">49</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">50</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">51</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">52</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">53</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">54</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">55</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">56</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">57</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">58</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">59</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">60</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">61</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">62</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">63</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">64</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">65</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">66</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">67</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">68</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">69</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">70</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">71</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">72</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">73</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">74</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">75</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">76</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">77</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">78</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">79</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">80</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">81</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">82</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">83</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">84</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">85</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">86</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">87</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">88</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">89</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">90</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">91</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">92</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">93</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">94</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">95</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">96</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">97</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">98</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">99</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">100</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">101</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">102</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">103</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">104</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">105</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">106</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">107</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">108</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">109</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">110</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">111</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">112</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">113</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">114</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">115</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">116</div>
</div>

<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;padding:0 8px 0 11px;white-space:pre;font-size:13px;line-height:18px;float:left"><span style="color:#0086B3">package</span><span> </span><span style="color:#333">Moo::_Utils</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#0086B3">no</span><span> </span><span style="color:#333">warnings</span><span> </span><span style="color:#D14">&#39;once&#39;</span><span style="color:#333">;</span><span> </span><span style="color:#999988;font-style:italic"># guard against -w</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_getglob</span><span> </span><span style="color:#333">{</span><span> </span><span style="color:#333;font-weight:bold">\</span><span style="color:#008080">*</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">}</span><span> </span><span style="color:#333">}</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_getstash</span><span> </span><span style="color:#333">{</span><span> </span><span style="color:#333;font-weight:bold">\</span><span style="color:#008080">%</span><span style="color:#333">{</span><span style="color:#D14">&quot;$_[0]::&quot;</span><span style="color:#333">}</span><span> </span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">constant</span><span> </span><span style="color:#D14">lt_5_8_3</span><span> </span><span style="color:#333">=&gt;</span><span> </span><span style="color:#333">(</span><span> </span><span style="color:#008080">$]</span><span> </span><span style="color:#333">&lt;</span><span> </span><span style="color:#008080">5.008003</span><span> </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#008080">$ENV</span><span style="color:#333">{</span><span style="color:#333">MOO_TEST_PRE_583</span><span style="color:#333">}</span><span> </span><span style="color:#333">)</span><span> </span><span style="color:#333">?</span><span> </span><span style="color:#008080">1</span><span> </span><span style="color:#333">:</span><span> </span><span style="color:#008080">0</span><span style="color:#333">;</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">constant</span><span> </span><span style="color:#D14">can_haz_subname</span><span> </span><span style="color:#333">=&gt;</span><span> </span><span style="color:#0086B3">eval</span><span> </span><span style="color:#333">{</span><span> </span><span style="color:#333;font-weight:bold">require</span><span> </span><span style="color:#333">Sub::Name</span><span> </span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">strictures</span><span> </span><span style="color:#008080">1</span><span style="color:#333">;</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">Module::Runtime</span><span> </span><span style="color:#D14">qw(require_module)</span><span style="color:#333">;</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">Devel::GlobalDestruction</span><span> </span><span style="color:#333">(</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">base</span><span> </span><span style="color:#D14">qw(Exporter)</span><span style="color:#333">;</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">Moo::_mro</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">our</span><span> </span><span style="color:#008080">@EXPORT</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#D14">qw(
    _getglob _install_modifier _load_module _maybe_load_module
    _get_linear_isa _getstash _install_coderef _name_coderef
    _unimport_coderefs _in_global_destruction
)</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_in_global_destruction</span><span> </span><span style="color:#333">()</span><span style="color:#333">;</span><span>
</span><span style="color:#008080">*_in_global_destruction</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333;font-weight:bold">\</span><span style="color:#333">&amp;Devel::GlobalDestruction::in_global_destruction</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_install_modifier</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$into</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$type</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$name</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$code</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">@_</span><span style="color:#333">;</span><span>
</span><span>
  </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">(</span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$to_modify</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$into</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">can</span><span style="color:#333">(</span><span style="color:#008080">$name</span><span style="color:#333">)</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span> </span><span style="color:#999988;font-style:italic"># CMM will throw for us if not</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">require</span><span> </span><span style="color:#333">Sub::Defer</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">Sub::Defer::undefer_sub</span><span style="color:#333">(</span><span style="color:#008080">$to_modify</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333">}</span><span>
</span><span>
  </span><span style="color:#333">Class::Method::Modifiers::install_modifier</span><span style="color:#333">(</span><span style="color:#008080">@_</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">our</span><span> </span><span style="color:#008080">%MAYBE_LOADED</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_load_module</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#333">(</span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$proto</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">)</span><span> </span><span style="color:#333">=~</span><span> </span><span style="color:#009926">s/::/\//g</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#0086B3">return</span><span> </span><span style="color:#008080">1</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#008080">$INC</span><span style="color:#333">{</span><span style="color:#D14">&quot;${proto}.pm&quot;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span style="color:#999988;font-style:italic">  # can&#39;t just -&gt;can(&#39;can&#39;) because a sub-package Foo::Bar::Baz
</span><span style="color:#999988;font-style:italic">  # creates a &#39;Baz::&#39; key in Foo::Bar&#39;s symbol table
</span><span>  </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$stash</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">_getstash</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">)</span><span style="color:#333">||</span><span style="color:#333">{</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#0086B3">return</span><span> </span><span style="color:#008080">1</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#0086B3">grep</span><span> </span><span style="color:#333">+</span><span style="color:#333">(</span><span style="color:#333">!</span><span style="color:#0086B3">ref</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">and</span><span> </span><span style="color:#008080">*</span><span style="color:#008080">$_</span><span style="color:#333">{</span><span style="color:#333">CODE</span><span style="color:#333">}</span><span style="color:#333">)</span><span style="color:#333">,</span><span> </span><span style="color:#0086B3">values</span><span> </span><span style="color:#008080">%</span><span style="color:#008080">$stash</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333">require_module</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#0086B3">return</span><span> </span><span style="color:#008080">1</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_maybe_load_module</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#0086B3">return</span><span> </span><span style="color:#008080">$MAYBE_LOADED</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">}</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#0086B3">exists</span><span> </span><span style="color:#008080">$MAYBE_LOADED</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333">(</span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$proto</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">)</span><span> </span><span style="color:#333">=~</span><span> </span><span style="color:#009926">s/::/\//g</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#0086B3">local</span><span> </span><span style="color:#008080">$@</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">(</span><span style="color:#0086B3">eval</span><span> </span><span style="color:#333">{</span><span> </span><span style="color:#333;font-weight:bold">require</span><span> </span><span style="color:#D14">&quot;${proto}.pm&quot;</span><span style="color:#333">;</span><span> </span><span style="color:#008080">1</span><span> </span><span style="color:#333">}</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#008080">$MAYBE_LOADED</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">1</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333">}</span><span> </span><span style="color:#333;font-weight:bold">else</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">(</span><span style="color:#0086B3">exists</span><span> </span><span style="color:#008080">$INC</span><span style="color:#333">{</span><span style="color:#D14">&quot;${proto}.pm&quot;</span><span style="color:#333">}</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span>
</span><span>      </span><span style="color:#0086B3">warn</span><span> </span><span style="color:#D14">&quot;$_[0] exists but failed to load with error: $@&quot;</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span>
</span><span>    </span><span style="color:#008080">$MAYBE_LOADED</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">0</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333">}</span><span>
</span><span>  </span><span style="color:#0086B3">return</span><span> </span><span style="color:#008080">$MAYBE_LOADED</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_get_linear_isa</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#0086B3">return</span><span> </span><span style="color:#333">mro::get_linear_isa</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_install_coderef</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#0086B3">no</span><span> </span><span style="color:#333">warnings</span><span> </span><span style="color:#D14">&#39;redefine&#39;</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#008080">*</span><span style="color:#333">{</span><span style="color:#333">_getglob</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">)</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">_name_coderef</span><span style="color:#333">(</span><span style="color:#008080">@_</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_name_coderef</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#0086B3">shift</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#008080">@_</span><span> </span><span style="color:#333">&gt;</span><span> </span><span style="color:#008080">2</span><span style="color:#333">;</span><span> </span><span style="color:#999988;font-style:italic"># three args is (target, name, sub)</span><span>
</span><span>  </span><span style="color:#333">can_haz_subname</span><span> </span><span style="color:#333">?</span><span> </span><span style="color:#333">Sub::Name::subname</span><span style="color:#333">(</span><span style="color:#008080">@_</span><span style="color:#333">)</span><span> </span><span style="color:#333">:</span><span> </span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">1</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_unimport_coderefs</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$target</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$info</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">@_</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#0086B3">return</span><span> </span><span style="color:#333;font-weight:bold">unless</span><span> </span><span style="color:#008080">$info</span><span> </span><span style="color:#333;font-weight:bold">and</span><span> </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$exports</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$info</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#333">exports</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">%rev</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">reverse</span><span> </span><span style="color:#008080">%</span><span style="color:#008080">$exports</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$stash</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">_getstash</span><span style="color:#333">(</span><span style="color:#008080">$target</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#0086B3">foreach</span><span> </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$name</span><span> </span><span style="color:#333">(</span><span style="color:#0086B3">keys</span><span> </span><span style="color:#008080">%</span><span style="color:#008080">$exports</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$stash</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#008080">$name</span><span style="color:#333">}</span><span> </span><span style="color:#333;font-weight:bold">and</span><span> </span><span style="color:#0086B3">defined</span><span style="color:#333">(</span><span style="color:#008080">&amp;</span><span style="color:#333">{</span><span style="color:#008080">$stash</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#008080">$name</span><span style="color:#333">}</span><span style="color:#333">}</span><span style="color:#333">)</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span>
</span><span>      </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$rev</span><span style="color:#333">{</span><span style="color:#008080">$target</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">can</span><span style="color:#333">(</span><span style="color:#008080">$name</span><span style="color:#333">)</span><span style="color:#333">}</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$old</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">delete</span><span> </span><span style="color:#008080">$stash</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#008080">$name</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$full_name</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">join</span><span style="color:#333">(</span><span style="color:#D14">&#39;::&#39;</span><span style="color:#333">,</span><span style="color:#008080">$target</span><span style="color:#333">,</span><span style="color:#008080">$name</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span style="color:#999988;font-style:italic">        # Copy everything except the code slot back into place (e.g. $has)
</span><span>        </span><span style="color:#0086B3">foreach</span><span> </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$type</span><span> </span><span style="color:#333">(</span><span style="color:#D14">qw(SCALAR HASH ARRAY IO)</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span>
</span><span>          </span><span style="color:#333;font-weight:bold">next</span><span> </span><span style="color:#333;font-weight:bold">unless</span><span> </span><span style="color:#0086B3">defined</span><span style="color:#333">(</span><span style="color:#008080">*</span><span style="color:#333">{</span><span style="color:#008080">$old</span><span style="color:#333">}</span><span style="color:#333">{</span><span style="color:#008080">$type</span><span style="color:#333">}</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>          </span><span style="color:#0086B3">no</span><span> </span><span style="color:#333">strict</span><span> </span><span style="color:#D14">&#39;refs&#39;</span><span style="color:#333">;</span><span>
</span><span>          </span><span style="color:#008080">*</span><span style="color:#008080">$full_name</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">*</span><span style="color:#333">{</span><span style="color:#008080">$old</span><span style="color:#333">}</span><span style="color:#333">{</span><span style="color:#008080">$type</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333">}</span><span>
</span><span>      </span><span style="color:#333">}</span><span>
</span><span>    </span><span style="color:#333">}</span><span>
</span><span>  </span><span style="color:#333">}</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">STANDARD_DESTROY</span><span> </span><span style="color:#333">{</span><span>
</span><span>  </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$self</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">shift</span><span style="color:#333">;</span><span>
</span><span>
  </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$e</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333;font-weight:bold">do</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#0086B3">local</span><span> </span><span style="color:#008080">$?</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#0086B3">local</span><span> </span><span style="color:#008080">$@</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#0086B3">eval</span><span> </span><span style="color:#333">{</span><span>
</span><span>      </span><span style="color:#008080">$self</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">DEMOLISHALL</span><span style="color:#333">(</span><span style="color:#333">_in_global_destruction</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#008080">$@</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>
  </span><span style="color:#0086B3">no</span><span> </span><span style="color:#333">warnings</span><span> </span><span style="color:#D14">&#39;misc&#39;</span><span style="color:#333">;</span><span>
</span><span>  </span><span style="color:#0086B3">die</span><span> </span><span style="color:#008080">$e</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#008080">$e</span><span style="color:#333">;</span><span> </span><span style="color:#999988;font-style:italic"># rethrow</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#008080">1</span><span style="color:#333">;</span><span>
</span></div>
</div>
<div style="clear:both"></div>
<!-- Generated @ Tue Dec 24 10:24:42 2013, using Pistachio version 0.04 -->