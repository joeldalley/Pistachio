<div>
<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;float:left;background-color:#eee;border-right:1px #999988 solid">
<div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">1</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">2</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">3</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">4</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">5</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">6</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">7</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">8</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">9</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">10</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">11</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">12</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">13</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">14</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">15</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">16</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">17</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">18</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">19</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">20</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">21</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">22</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">23</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">24</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">25</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">26</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">27</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">28</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">29</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">30</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">31</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">32</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">33</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">34</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">35</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">36</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">37</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">38</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">39</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">40</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">41</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">42</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">43</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">44</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">45</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">46</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">47</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">48</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">49</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">50</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">51</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">52</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">53</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">54</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">55</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">56</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">57</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">58</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">59</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">60</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">61</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">62</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">63</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">64</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">65</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">66</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">67</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">68</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">69</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">70</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">71</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">72</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">73</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">74</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">75</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">76</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">77</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">78</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">79</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">80</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">81</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">82</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">83</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">84</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">85</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">86</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">87</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">88</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">89</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">90</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">91</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">92</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">93</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">94</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">95</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">96</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">97</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">98</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">99</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">100</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">101</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">102</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">103</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">104</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">105</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">106</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">107</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">108</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">109</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">110</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">111</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">112</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">113</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">114</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">115</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">116</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">117</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">118</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">119</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">120</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">121</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">122</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">123</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">124</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">125</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">126</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">127</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">128</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">129</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">130</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">131</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">132</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">133</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">134</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">135</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">136</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">137</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">138</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">139</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">140</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">141</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">142</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">143</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">144</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">145</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">146</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">147</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">148</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">149</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">150</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">151</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">152</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">153</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">154</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">155</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">156</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">157</div>
</div>

<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;padding:0 8px 0 11px;white-space:pre;font-size:13px;line-height:18px;float:left"><span> 
</span><span style="color:#999988;font-style:italic">#/ Provides forFile() and extract(), both of which
</span><span style="color:#999988;font-style:italic">#/ return a meta data hash; the difference being that
</span><span style="color:#999988;font-style:italic">#/ forFile() will die on bad/missing data.
</span><span style="color:#999988;font-style:italic">#/
</span><span style="color:#999988;font-style:italic">#/ Also provides update(), for updating mp3 meta data;
</span><span style="color:#999988;font-style:italic">#/ currently this is the only type that can be updated.
</span><span style="color:#999988;font-style:italic">#/
</span><span style="color:#999988;font-style:italic">#/ @author Joel Dalley
</span><span style="color:#999988;font-style:italic">#/ @version 2013/Apr/13
</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">stern</span><span style="color:#333">;</span><span>
</span><span style="color:#0086B3">package</span><span> </span><span style="color:#333">Soma::Song::Meta</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">Soma::Song</span><span style="color:#333">;</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">Soma::Const</span><span style="color:#333">;</span><span>
</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">#//////////////////////////////////////////////////////////////
</span><span style="color:#999988;font-style:italic">#/ Interface //////////////////////////////////////////////////
</span><span>
</span><span style="color:#999988;font-style:italic">#/ @param string $file    UNIX path to a music file
</span><span style="color:#999988;font-style:italic">#/ @return hash    meta data hash
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">forFile</span><span style="color:#333">($)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$file</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">shift</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">%meta</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">extract</span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333">COMPLETE_DATA_REQUIRED:</span><span> </span><span style="color:#333">{</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$size</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">scalar</span><span> </span><span style="color:#0086B3">keys</span><span> </span><span style="color:#008080">%meta</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">@def</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">grep</span><span> </span><span style="color:#333">{</span><span style="color:#0086B3">defined</span><span> </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">}</span><span style="color:#333">}</span><span> </span><span style="color:#0086B3">keys</span><span> </span><span style="color:#008080">%meta</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$max</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">Soma::Const::Song::MAX_FILEPATH</span><span style="color:#333">;</span><span>
</span><span>
        </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;No duration `$file`&quot;</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">!</span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;duration&#39;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;Track is zero (0) `$file`&quot;</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">!</span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;track&#39;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;Track NaN `$file`&quot;</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;track&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">!~</span><span> </span><span style="color:#009926">/^\d+$/</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;File path too long `$file`&quot;</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#0086B3">length</span><span> </span><span style="color:#008080">$file</span><span> </span><span style="color:#333">&gt;</span><span> </span><span style="color:#008080">$max</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;At least one undef meta datum `$file`&quot;</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#008080">@def</span><span> </span><span style="color:#333">&lt;</span><span> </span><span style="color:#008080">$size</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span>
</span><span>
    </span><span style="color:#008080">%meta</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">#/ @param string $file    UNIX path to a music file
</span><span style="color:#999988;font-style:italic">#/ @return hash    meta data hash
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">extract</span><span style="color:#333">($)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$file</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">shift</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;No such file `$file`&quot;</span><span> </span><span style="color:#333;font-weight:bold">unless</span><span> </span><span style="color:#333;font-weight:bold">-e</span><span> </span><span style="color:#008080">$file</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">%meta</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">switch:</span><span> </span><span style="color:#333">{</span><span>
</span><span>        </span><span style="color:#333">Soma::Song::isMp3</span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">and</span><span> </span><span style="color:#333;font-weight:bold">do</span><span> </span><span style="color:#333">{</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">require</span><span> </span><span style="color:#333">MP3::Tag</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$mp3</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">MP3::Tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">new</span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$secs</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$mp3</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">total_secs</span><span style="color:#333">(</span><span style="color:#333">)</span><span> </span><span style="color:#333">||</span><span> </span><span style="color:#008080">0</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">@info</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$mp3</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">autoinfo</span><span style="color:#333">(</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>
            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;title&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$info</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;track&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$info</span><span style="color:#333">[</span><span style="color:#008080">1</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;artist&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$info</span><span style="color:#333">[</span><span style="color:#008080">2</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;album&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$info</span><span style="color:#333">[</span><span style="color:#008080">3</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;year&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$info</span><span style="color:#333">[</span><span style="color:#008080">5</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;genre&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$info</span><span style="color:#333">[</span><span style="color:#008080">6</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;duration&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">int</span><span style="color:#333">(</span><span style="color:#008080">$secs</span><span> </span><span style="color:#333">+</span><span> </span><span style="color:#008080">.5</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>
            </span><span style="color:#333;font-weight:bold">last</span><span> </span><span style="color:#333">switch</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>
        </span><span style="color:#333">Soma::Song::isM4a</span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">and</span><span> </span><span style="color:#333;font-weight:bold">do</span><span> </span><span style="color:#333">{</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">require</span><span> </span><span style="color:#333">MP4::Info</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$tag</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">MP4::Info::get_mp4tag</span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$mins</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;MM&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">||</span><span> </span><span style="color:#008080">0</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$secs</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;SS&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">||</span><span> </span><span style="color:#008080">0</span><span style="color:#333">;</span><span>
</span><span>
            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;title&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;NAM&#39;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;track&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;TRKN&#39;</span><span style="color:#333">}</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;artist&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;ART&#39;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;album&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;ALB&#39;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;year&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;DAY&#39;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;genre&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#D14">&#39;GNRE&#39;</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>            </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;duration&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">int</span><span style="color:#333">(</span><span style="color:#008080">$mins</span><span style="color:#333">*</span><span style="color:#008080">60</span><span> </span><span style="color:#333">+</span><span> </span><span style="color:#008080">$secs</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>
            </span><span style="color:#333;font-weight:bold">last</span><span> </span><span style="color:#333">switch</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>
        </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;Invalid file `$file`&quot;</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">    #/ simplify track
</span><span>    </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;track&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=~</span><span> </span><span style="color:#009926">/^(\d+)/</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#D14">&#39;track&#39;</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$1</span><span> </span><span style="color:#333">&amp;&amp;</span><span> </span><span style="color:#0086B3">sprintf</span><span style="color:#333">(</span><span style="color:#D14">&#39;%0d&#39;</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$1</span><span style="color:#333">)</span><span> </span><span style="color:#333">||</span><span> </span><span style="color:#0086B3">undef</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#008080">%meta</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">#/ Updates the meta data for the given file.
</span><span style="color:#999988;font-style:italic">#/ @param string $file    UNIX path to a song file
</span><span style="color:#999988;font-style:italic">#/ @param hash %meta    meta data
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">update</span><span style="color:#333">($%)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">,</span><span> </span><span style="color:#008080">%meta</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">@_</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333">Soma::Song::isMp3</span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">)</span><span> 
</span><span>        </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;Only MP3s can be updated `$file`&quot;</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333;font-weight:bold">require</span><span> </span><span style="color:#333">MP3::Tag</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$mp3</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">MP3::Tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">new</span><span style="color:#333">(</span><span style="color:#008080">$file</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">@tags</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$mp3</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">get_tags</span><span style="color:#333">(</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$remove_tag</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#333">{</span><span>
</span><span>        </span><span style="color:#0086B3">return</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">!</span><span style="color:#0086B3">grep</span><span> </span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span> </span><span style="color:#333;font-weight:bold">eq</span><span> </span><span style="color:#008080">$_</span><span style="color:#333">,</span><span> </span><span style="color:#008080">@tags</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#008080">$mp3</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">}</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">remove_tag</span><span style="color:#333">(</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#0086B3">die</span><span> </span><span style="color:#008080">$!</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#0086B3">for</span><span> </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$v</span><span> </span><span style="color:#333">(</span><span style="color:#D14">qw(ID3v1 ID3v2)</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span>
</span><span>        </span><span style="color:#008080">$remove_tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">(</span><span style="color:#008080">$v</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#008080">$mp3</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">new_tag</span><span style="color:#333">(</span><span style="color:#008080">$v</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#0086B3">die</span><span> </span><span style="color:#008080">$!</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$sub</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#D14">&quot;_write_$v&quot;</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$ref</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333;font-weight:bold">\</span><span style="color:#008080">&amp;</span><span style="color:#008080">$sub</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#008080">$ref</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">(</span><span style="color:#008080">$mp3</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">{</span><span style="color:#008080">$v</span><span style="color:#333">}</span><span style="color:#333">,</span><span> </span><span style="color:#008080">%meta</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span>
</span><span>
    </span><span style="color:#008080">$mp3</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">close</span><span style="color:#333">(</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">#//////////////////////////////////////////////////////////////
</span><span style="color:#999988;font-style:italic">#/ Internal use ///////////////////////////////////////////////
</span><span>
</span><span style="color:#999988;font-style:italic">#/ Writes an ID3v1 meta tag.
</span><span style="color:#999988;font-style:italic">#/ @param object $tag    an MP3::Tag::ID3v1
</span><span style="color:#999988;font-style:italic">#/ @param hash %meta    meta data
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_write_ID3v1</span><span style="color:#333">($%)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$tag</span><span style="color:#333">,</span><span> </span><span style="color:#008080">%meta</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">@_</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">@keys</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#D14">qw(title track album artist year genre)</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#0086B3">for</span><span> </span><span style="color:#333">(</span><span style="color:#008080">@keys</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span> 
</span><span>        </span><span style="color:#333;font-weight:bold">next</span><span> </span><span style="color:#333;font-weight:bold">unless</span><span> </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#008080">$_</span><span style="color:#333">(</span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">}</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;$_ -- $!&quot;</span><span> 
</span><span>    </span><span style="color:#333">}</span><span>
</span><span>    </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">write_tag</span><span style="color:#333">(</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#0086B3">die</span><span> </span><span style="color:#008080">$!</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">#/ Writes an ID3v2 meta tag.
</span><span style="color:#999988;font-style:italic">#/ @param object $tag    an MP3::Tag::ID3v2
</span><span style="color:#999988;font-style:italic">#/ @param hash %meta    meta data
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">_write_ID3v2</span><span style="color:#333">($%)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$tag</span><span style="color:#333">,</span><span> </span><span style="color:#008080">%meta</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">@_</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">%map</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#D14">qw(TIT2 title TRCK track TALB album 
                 TCOM artist TCON genre TYER year)</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#0086B3">while</span><span> </span><span style="color:#333">(</span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$f</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$_</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#0086B3">each</span><span> </span><span style="color:#008080">%map</span><span style="color:#333">)</span><span> </span><span style="color:#333">{</span><span> 
</span><span>        </span><span style="color:#333;font-weight:bold">next</span><span> </span><span style="color:#333;font-weight:bold">unless</span><span> </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">add_frame</span><span style="color:#333">(</span><span style="color:#008080">$f</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$meta</span><span style="color:#333">{</span><span style="color:#008080">$_</span><span style="color:#333">}</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;$_ -- $!&quot;</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span>
</span><span>    </span><span style="color:#008080">$tag</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">write_tag</span><span style="color:#333">(</span><span style="color:#333">)</span><span> </span><span style="color:#333;font-weight:bold">or</span><span> </span><span style="color:#0086B3">die</span><span> </span><span style="color:#008080">$!</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#008080">1</span><span style="color:#333">;</span><span>
</span></div>
</div>
<div style="clear:both"></div>
<!-- Generated @ Sat Mar 22 18:37:59 2014, using Pistachio version 0.05 -->