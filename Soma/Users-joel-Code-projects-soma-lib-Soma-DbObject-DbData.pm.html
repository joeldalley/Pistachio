<div>
<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;float:left;background-color:#eee;border-right:1px #999988 solid">
<div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">1</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">2</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">3</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">4</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">5</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">6</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">7</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">8</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">9</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">10</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">11</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">12</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">13</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">14</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">15</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">16</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">17</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">18</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">19</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">20</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">21</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">22</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">23</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">24</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">25</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">26</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">27</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">28</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">29</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">30</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">31</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">32</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">33</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">34</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">35</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">36</div>
</div>

<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;padding:0 8px 0 11px;white-space:pre;font-size:13px;line-height:18px;float:left"><span>
</span><span style="color:#999988;font-style:italic">#/ Expresses database (column name, value) pairs as an object.
</span><span style="color:#999988;font-style:italic">#/
</span><span style="color:#999988;font-style:italic">#/ Note &#39;use fields&#39; can&#39;t be employed here since the 
</span><span style="color:#999988;font-style:italic">#/ fields an object may have aren&#39;t known at compile time.
</span><span style="color:#999988;font-style:italic">#/
</span><span style="color:#999988;font-style:italic">#/ @author Joel Dalley
</span><span style="color:#999988;font-style:italic">#/ @version 2013/Mar/23
</span><span>
</span><span style="color:#333;font-weight:bold">use</span><span> </span><span style="color:#333">stern</span><span style="color:#333">;</span><span>
</span><span style="color:#0086B3">package</span><span> </span><span style="color:#333">Soma::DbObject::DbData</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">#/ @param arrayref $columns    table columns
</span><span style="color:#999988;font-style:italic">#/ @param arrayref [optional] $values    column values
</span><span style="color:#999988;font-style:italic">#/ @return object    a Soma::DbObject::DbData
</span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#990000;font-weight:bold">new</span><span style="color:#333">($$)</span><span> </span><span style="color:#333">{</span><span>
</span><span>    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$columns</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$values</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333">(</span><span style="color:#0086B3">shift</span><span style="color:#333">,</span><span> </span><span style="color:#0086B3">shift</span><span> </span><span style="color:#333">||</span><span> </span><span style="color:#333">[</span><span style="color:#333">]</span><span style="color:#333">)</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">%data</span><span style="color:#333">;</span><span> </span><span style="color:#008080">@data</span><span style="color:#333">{</span><span style="color:#008080">@</span><span style="color:#008080">$columns</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">@</span><span style="color:#008080">$values</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#008080">$obj</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#333;font-weight:bold">sub</span><span> </span><span style="color:#333">{</span><span>
</span><span>        </span><span style="color:#333;font-weight:bold">my</span><span> </span><span style="color:#333">(</span><span style="color:#008080">$field</span><span style="color:#333">,</span><span> </span><span style="color:#008080">$value</span><span style="color:#333">)</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">@_</span><span style="color:#333">;</span><span>
</span><span>
</span><span style="color:#999988;font-style:italic">        #/ special case: return a copy
</span><span style="color:#999988;font-style:italic">        #/ of the object&#39;s column names
</span><span>        </span><span style="color:#0086B3">return</span><span> </span><span style="color:#008080">@</span><span style="color:#008080">$columns</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#008080">$field</span><span> </span><span style="color:#333;font-weight:bold">eq</span><span> </span><span style="color:#D14">&#39;cols&#39;</span><span style="color:#333">;</span><span>
</span><span>
        </span><span style="color:#0086B3">die</span><span> </span><span style="color:#D14">&quot;Invalid field `$field`&quot;</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#333">!</span><span style="color:#0086B3">exists</span><span> </span><span style="color:#008080">$data</span><span style="color:#333">{</span><span style="color:#008080">$field</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#008080">$data</span><span style="color:#333">{</span><span style="color:#008080">$field</span><span style="color:#333">}</span><span> </span><span style="color:#333">=</span><span> </span><span style="color:#008080">$value</span><span> </span><span style="color:#333;font-weight:bold">if</span><span> </span><span style="color:#0086B3">defined</span><span> </span><span style="color:#008080">$value</span><span style="color:#333">;</span><span>
</span><span>        </span><span style="color:#008080">$data</span><span style="color:#333">{</span><span style="color:#008080">$field</span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>    </span><span style="color:#333">}</span><span style="color:#333">;</span><span>
</span><span>
    </span><span style="color:#0086B3">bless</span><span> </span><span style="color:#008080">$obj</span><span style="color:#333">,</span><span> </span><span style="color:#333">__PACKAGE__</span><span style="color:#333">;</span><span>
</span><span style="color:#333">}</span><span>
</span><span>
</span><span style="color:#008080">1</span><span style="color:#333">;</span><span>
</span></div>
</div>
<div style="clear:both"></div>
<!-- Generated @ Sat Mar 22 18:37:59 2014, using Pistachio version 0.05 -->