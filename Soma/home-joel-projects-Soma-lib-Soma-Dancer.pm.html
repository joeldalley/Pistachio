<div>
<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;float:left;background-color:#eee;border-right:1px #999988 solid">
<div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">1</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">2</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">3</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">4</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">5</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">6</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">7</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">8</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">9</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">10</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">11</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">12</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">13</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">14</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">15</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">16</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">17</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">18</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">19</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">20</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">21</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">22</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">23</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">24</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">25</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">26</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">27</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">28</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">29</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">30</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">31</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">32</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">33</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">34</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">35</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">36</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">37</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">38</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">39</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">40</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">41</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">42</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">43</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">44</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">45</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">46</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">47</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">48</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">49</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">50</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">51</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">52</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">53</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">54</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">55</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">56</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">57</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">58</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">59</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">60</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">61</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">62</div>
</div>

<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;padding:0 8px 0 11px;white-space:pre;font-size:13px;line-height:18px;float:left"><span style="color:#FFF">
</span><span style="color:#999988;font-style:italic">#/ Dancer routes.
</span><span style="color:#999988;font-style:italic">#/ @author Joel Dalley
</span><span style="color:#999988;font-style:italic">#/ @version 2013/Mar/29
</span><span style="color:#FFF">
</span><span style="color:#0086B3">package</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">Dancer</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;:syntax&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">our</span><span style="color:#FFF"> </span><span style="color:#008080">$VERSION</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;0.1&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Params</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Settings</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Home</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">Soma::Dancer::Home::html</span><span style="color:#333">(</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/search/:query&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Search</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">Soma::Dancer::Search::html</span><span style="color:#333">(</span><span style="color:#333">QUERY</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/play/search/:query&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Play</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">Soma::Dancer::Play::searchHtml</span><span style="color:#333">(</span><span style="color:#333">QUERY</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/play/:mode/:id&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Play</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">Soma::Dancer::Play::modalHtml</span><span style="color:#333">(</span><span style="color:#333">MODE</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#333">ID</span><span style="color:#333">)</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">||</span><span style="color:#FFF"> </span><span style="color:#333">redirect</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/404.html&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/audio/:songid&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Audio</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">@params</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Audio::paramsFor</span><span style="color:#333">(</span><span style="color:#333">SONG_ID</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#008080">@params</span><span style="color:#FFF"> </span><span style="color:#333">?</span><span style="color:#FFF"> </span><span style="color:#333">send_file</span><span style="color:#333">(</span><span style="color:#008080">@params</span><span style="color:#333">)</span><span style="color:#FFF"> </span><span style="color:#333">:</span><span style="color:#FFF"> </span><span style="color:#0086B3">undef</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/cover/:albumid&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Cover</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">@params</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Cover::paramsFor</span><span style="color:#333">(</span><span style="color:#333">ALBUM_ID</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">send_file</span><span style="color:#333">(</span><span style="color:#008080">@params</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/json/covers/:count&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Json</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">Soma::Dancer::Json::covers</span><span style="color:#333">(</span><span style="color:#333">COUNT</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/json/search/:query&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Json</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">Soma::Dancer::Json::search</span><span style="color:#333">(</span><span style="color:#333">QUERY</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">get</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;/json/:mode/:id&#39;</span><span style="color:#FFF"> </span><span style="color:#333">=&gt;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">require</span><span style="color:#FFF"> </span><span style="color:#333">Soma::Dancer::Json</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">Soma::Dancer::Json::modal</span><span style="color:#333">(</span><span style="color:#333">MODE</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#333">ID</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333">true</span><span style="color:#333">;</span><span style="color:#FFF">
</span></div>
</div>
<div style="clear:both"></div>