<div>
<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;float:left;background-color:#eee;border-right:1px #999988 solid">
<div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">1</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">2</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">3</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">4</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">5</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">6</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">7</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">8</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">9</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">10</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">11</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">12</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">13</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">14</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">15</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">16</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">17</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">18</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">19</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">20</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">21</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">22</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">23</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">24</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">25</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">26</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">27</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">28</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">29</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">30</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">31</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">32</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">33</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">34</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">35</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">36</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">37</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">38</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">39</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">40</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">41</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">42</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">43</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">44</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">45</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">46</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">47</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">48</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">49</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">50</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">51</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">52</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">53</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">54</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">55</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">56</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">57</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">58</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">59</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">60</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">61</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">62</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">63</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">64</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">65</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">66</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">67</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">68</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">69</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">70</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">71</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">72</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">73</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">74</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">75</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">76</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">77</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">78</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">79</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">80</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">81</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">82</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">83</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">84</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">85</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">86</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">87</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">88</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">89</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">90</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">91</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">92</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">93</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">94</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">95</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">96</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">97</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">98</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">99</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">100</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">101</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">102</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">103</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">104</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">105</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">106</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">107</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">108</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">109</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">110</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">111</div> <div style="font-size:13px;color:#999988;display:block;line-height:18px;padding:0 8px;margin:0;border:0;text-align:right;border-spacing:2px">112</div>
</div>

<div style="font-family:Consolas,'Liberation Mono',Courier,monospace;padding:0 8px 0 11px;white-space:pre;font-size:13px;line-height:18px;float:left"><span style="color:#0086B3">package</span><span style="color:#FFF"> </span><span style="color:#333">Pistachio::Html</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#999988;font-style:italic"># ABSTRACT: provides snippet(), which turns source code text into stylish HTML
</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">our</span><span style="color:#FFF"> </span><span style="color:#008080">$VERSION</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;0.03&#39;</span><span style="color:#333">;</span><span style="color:#FFF"> </span><span style="color:#999988;font-style:italic"># VERSION</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">strict</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">warnings</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">Pistachio::Tokenizer</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">HTML::Entities</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">Module::Load</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333;font-weight:bold">use</span><span style="color:#FFF"> </span><span style="color:#333">Carp</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;croak&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#999988;font-style:italic">#/ @param string $type    object type
</span><span style="color:#999988;font-style:italic">#/ @param string $lang    language, e.g., &#39;Perl5&#39;
</span><span style="color:#999988;font-style:italic">#/ @param string $style    style, e.g., &#39;Github&#39;
</span><span style="color:#999988;font-style:italic">#/ @return Pistachio::Html
</span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#990000;font-weight:bold">new</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$type</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#0086B3">shift</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#333">(</span><span style="color:#008080">$lang</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$style</span><span style="color:#333">)</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#333">(</span><span style="color:#0086B3">shift</span><span style="color:#FFF"> </span><span style="color:#333">||</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;&#39;</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#0086B3">shift</span><span style="color:#FFF"> </span><span style="color:#333">||</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;&#39;</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#999988;font-style:italic">    #/ current package ability checker
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$ensure</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#0086B3">croak</span><span style="color:#FFF"> </span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">1</span><span style="color:#333">]</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">if</span><span style="color:#FFF"> </span><span style="color:#333">!</span><span style="color:#333">__PACKAGE__</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">can</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333">[</span><span style="color:#008080">0</span><span style="color:#333">]</span><span style="color:#333">)</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#999988;font-style:italic">    #/ common css package
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$style_pkg</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;Pistachio::Css::${style}::Common&quot;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">@import</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">qw(number_cell number_strip code_div)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#0086B3">eval</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF"> </span><span style="color:#333">load</span><span style="color:#FFF"> </span><span style="color:#008080">$style_pkg</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">@import</span><span style="color:#FFF"> </span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF"> 
</span><span style="color:#FFF">    </span><span style="color:#0086B3">croak</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;Style `$style` isn&#39;t supported&quot;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">if</span><span style="color:#FFF"> </span><span style="color:#008080">$@</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#008080">$ensure</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;$style_pkg doesn&#39;t export $_&quot;</span><span style="color:#333">)</span><span style="color:#FFF"> </span><span style="color:#0086B3">for</span><span style="color:#FFF"> </span><span style="color:#008080">@import</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#999988;font-style:italic">    #/ language-specific css package
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$lang_pkg</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;Pistachio::Css::${style}::${lang}&quot;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#0086B3">eval</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF"> </span><span style="color:#333">load</span><span style="color:#FFF"> </span><span style="color:#008080">$lang_pkg</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;token&#39;</span><span style="color:#FFF"> </span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#0086B3">croak</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;Language `$lang` isn&#39;t supported&quot;</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">if</span><span style="color:#FFF"> </span><span style="color:#008080">$@</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#008080">$ensure</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">(</span><span style="color:#D14">&#39;token&#39;</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;$lang_pkg doesn&#39;t export token&quot;</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
    </span><span style="color:#0086B3">bless</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#333">Pistachio::Tokenizer</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">new</span><span style="color:#333">(</span><span style="color:#008080">$lang</span><span style="color:#333">)</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">iterator</span><span style="color:#333">(</span><span style="color:#0086B3">shift</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">}</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$type</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#999988;font-style:italic">#/ @param Pistachio::Html $this
</span><span style="color:#999988;font-style:italic">#/ @param scalarref $text    source code text
</span><span style="color:#999988;font-style:italic">#/ @return string    line numbers div + source code div html
</span><span style="color:#333;font-weight:bold">sub</span><span style="color:#FFF"> </span><span style="color:#990000;font-weight:bold">snippet</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#333">(</span><span style="color:#008080">$this</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$text</span><span style="color:#333">)</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#008080">@_</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
    </span><span style="color:#333">NUMBER_STRIP:</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$num_strip</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">do</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">@nums</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#008080">1</span><span style="color:#FFF"> </span><span style="color:#333">..</span><span style="color:#FFF"> </span><span style="color:#008080">@</span><span style="color:#333">{</span><span style="color:#333">[</span><span style="color:#0086B3">split</span><span style="color:#FFF"> </span><span style="color:#009926">/\n/</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$</span><span style="color:#008080">$text</span><span style="color:#333">]</span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$spec</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;&lt;div style=&quot;%s&quot;&gt;%d&lt;/div&gt;&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">@divs</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#0086B3">map</span><span style="color:#FFF"> </span><span style="color:#0086B3">sprintf</span><span style="color:#333">(</span><span style="color:#008080">$spec</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#333">&amp;number_cell</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$_</span><span style="color:#333">)</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">@nums</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
        </span><span style="color:#008080">$spec</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">qq{&lt;div style=&quot;%s&quot;&gt;\n%s\n&lt;/div&gt;\n}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#0086B3">sprintf</span><span style="color:#FFF"> </span><span style="color:#008080">$spec</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#333">&amp;number_strip</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;@divs&quot;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
    </span><span style="color:#333">CODE_DIV:</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$code_div</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#333;font-weight:bold">do</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$code</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$it</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#008080">$this</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">(</span><span style="color:#008080">$text</span><span style="color:#333">)</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
        </span><span style="color:#0086B3">while</span><span style="color:#FFF"> </span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#008080">$it</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">(</span><span style="color:#333">)</span><span style="color:#333">)</span><span style="color:#FFF"> </span><span style="color:#333">{</span><span style="color:#FFF"> 
</span><span style="color:#FFF">            </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$value</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#333">encode_entities</span><span style="color:#FFF"> </span><span style="color:#008080">$_</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">value</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">            </span><span style="color:#333;font-weight:bold">my</span><span style="color:#FFF"> </span><span style="color:#008080">$spec</span><span style="color:#FFF"> </span><span style="color:#333">=</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;&lt;span style=&quot;%s&quot;&gt;%s&lt;/span&gt;&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">            </span><span style="color:#008080">$code</span><span style="color:#FFF"> </span><span style="color:#333">.=</span><span style="color:#FFF"> </span><span style="color:#0086B3">sprintf</span><span style="color:#FFF"> </span><span style="color:#008080">$spec</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#333">token</span><span style="color:#333">(</span><span style="color:#008080">$_</span><span style="color:#333;font-weight:bold">-&gt;</span><span style="color:#333">type</span><span style="color:#333">)</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$value</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">        </span><span style="color:#333">}</span><span style="color:#FFF">
</span><span style="color:#FFF">
        </span><span style="color:#0086B3">sprintf</span><span style="color:#FFF"> </span><span style="color:#D14">qq{&lt;div style=&quot;%s&quot;&gt;%s&lt;/div&gt;}</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#333">&amp;code_div</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$code</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">    </span><span style="color:#333">}</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
    </span><span style="color:#0086B3">join</span><span style="color:#FFF"> </span><span style="color:#D14">&quot;\n&quot;</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;&lt;div&gt;&#39;</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$num_strip</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#008080">$code_div</span><span style="color:#333">,</span><span style="color:#FFF"> </span><span style="color:#D14">&#39;&lt;/div&gt;&#39;</span><span style="color:#333">,</span><span style="color:#FFF">
</span><span style="color:#FFF">               </span><span style="color:#D14">&#39;&lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;&#39;</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#333">}</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="color:#008080">1</span><span style="color:#333">;</span><span style="color:#FFF">
</span><span style="color:#FFF">
</span><span style="">__END__</span><span style="color:#FFF">
</span><span style="">
</span><span style="">=pod

=encoding UTF-8

=head1 NAME

Pistachio::Html - provides snippet(), which turns source code text into stylish HTML

=head1 VERSION

version 0.03

=head1 SYNOPSIS

 use Pistachio::Html;
 my $html = Pistachio::Html-&gt;new(&#39;Perl5&#39;, &#39;Github&#39;);

 my $scalar_ref = \&quot;use strict; ...;&quot;;
 my $snip = $html-&gt;snippet($scalar_ref);

=head1 AUTHOR

Joel Dalley &lt;joeldalley@gmail.com&gt;

=head1 COPYRIGHT AND LICENSE

This software is copyright (c) 2013 by Joel Dalley.

This is free software; you can redistribute it and/or modify it under
the same terms as the Perl 5 programming language system itself.

=cut
</span></div>
</div>
<div style="clear:both"></div>